# 第12章 详细设计的基础

## 12.1 详细设计概述

### 12.1.1 详细设计出发点

需求开发的结果（需求规格说明和需求分析模型）和软件体系结构的结果（软件体系结构设计方案与原型）

中层设计和低层设计

### 12.1.2 详细设计的上下文

实现所有功能性需求和非功能性需求



## 12.2 结构化设计

### 12.2.1 结构化设计的思想



### 12.2.2 结构化设计的过程

将数据流图转换成结构图



## 12.3 面向对象设计

### 12.3.1 面向对象设计的思想

职责、协作

### 12.3.2 面向对象设计的过程

1. 设计模型建立

   - 通过职责建立静态设计模型
     - 抽象类的职责
     - 抽象类之间的关系
     - 添加辅助类

   - 通过协作建立动态设计模型

     - 抽象对象之间协作

     - 明确对象的创建。

     - 选择合适的控制风格

2. 设计模型重构

   - 根据模块化的思想进行重构，目标为高内聚、低耦合
   - 根据信息隐藏的思想重构，目标为隐藏职责与变更
   - 利用设计模式重构

### 12.3.3 通过职责建立静态模型

1. 抽象对象的职责：类的职责主要由两部分组成：属性职责和方法职责。属
   性主要表示对象的状态，方法主要表示对象的行为。
2. 抽象类之间的关系：关系强弱：依赖＜关联＜聚合＜组合＜继承
3. 添加辅助类：接口类、记录类（数据类）、启动类、控制器类、实现数据类型的类、容器类

### 12.3.4 通过协作建立动态模型

1. 抽象对象之间的协作

   - 两种方法：
     - 从小到大，将对象的小职责聚合形成大职责
     - 从大到小，将大职责分配给各个小对象

   - 顺序图表示对象之间的协作：对象本身 + 对象之间的消息流

   - 消息种类：同步消息、异步消息、同步消息返回
   - 状态图表示软件的动态模型

2. 明确对象的创建
3. 选择合适的控制风格：
   - 集中式：做决策的往往只有一个对象，由这个对象决定怎么来分配职责，怎么来实现大的职责
   - 委托式：做出决策的对象不止一个
   - 分散式：无明确的控制对象



## 12.4 为类间协作开发集成测试用例

1. 类间协作的集成可以使用自顶向下、自底向上两种不同的方式。
   - 自顶向下集成从协作的发起端开始向协作终端集成，需要较少的驱动代码和较多的桩程序。
   - 自底向上集成从协作的终端开始向协作发起端集成，需要较多的驱动代码和较少的桩程序。
2. 类间协作的桩程序通常被称为 Mock Object，要求自身的测试代码更简单，可以不用测试就能保证正确性



## 12.5 详细设计文档描述



## 12.6 详细设计的评审

